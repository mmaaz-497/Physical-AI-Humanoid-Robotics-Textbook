# Research & Technical Decisions: Docusaurus Book Structure

**Feature**: 001-docusaurus-book-structure
**Date**: 2025-12-06
**Status**: Completed

## Overview

This document captures research findings and technical decisions made during the planning phase for the Physical AI & Humanoid Robotics Docusaurus book structure.

## Key Technical Decisions

### Decision 1: Docusaurus Version Selection

**Decision**: Use Docusaurus 3.x (latest stable release)

**Rationale**:
- Docusaurus 3.x provides modern React 18 support with improved performance
- MDX 3.x integration offers better syntax highlighting and component composition
- Built-in support for collapsible sidebar categories (required by spec)
- Active maintenance and community support
- Backward-compatible upgrade path if needed

**Alternatives Considered**:
- **Docusaurus 2.x**: Mature and stable, but missing some performance optimizations and MDX 3 features
- **VuePress**: Strong alternative, but team familiarity with React makes Docusaurus preferable
- **MkDocs**: Excellent for Python-heavy docs, but less suitable for multi-language robotics content (Python, C++, XML, YAML)
- **GitBook**: Good UI, but less customization control and potential vendor lock-in

**References**:
- [Docusaurus 3 Documentation](https://docusaurus.io/docs)
- [Docusaurus GitHub Repository](https://github.com/facebook/docusaurus)

---

### Decision 2: Sidebar Configuration Strategy

**Decision**: Use directory-based auto-generated sidebars with explicit `sidebar_position` front matter

**Rationale**:
- Docusaurus `autogenerated` sidebars reduce configuration boilerplate
- Category structure maps 1:1 to directory structure (7 categories = 7 subdirectories)
- Front matter `sidebar_position` property provides explicit ordering control when needed
- Easier to maintain as chapter count grows
- Reduces risk of sidebar/file mismatch errors

**Alternatives Considered**:
- **Manual `sidebars.js` configuration**: More control, but error-prone with 36 chapters; requires manual updates for every chapter addition
- **Flat directory structure with prefixed filenames**: Simpler file structure, but loses logical category grouping

**Implementation Approach**:
```javascript
// sidebars.js
module.exports = {
  docsSidebar: [
    {
      type: 'autogenerated',
      dirName: '.',
    },
  ],
};
```

Each category directory contains a `_category_.json` file:
```json
{
  "label": "Introduction to Physical AI & Humanoid Robotics",
  "position": 1,
  "collapsible": true,
  "collapsed": false
}
```

**References**:
- [Docusaurus Sidebar Documentation](https://docusaurus.io/docs/sidebar)
- [Autogenerated Sidebars](https://docusaurus.io/docs/sidebar/autogenerated)

---

### Decision 3: MDX File Naming Convention

**Decision**: Use kebab-case filenames matching chapter titles (e.g., `what-is-physical-ai.mdx`)

**Rationale**:
- URL-friendly (generates clean slugs: `/docs/01-introduction/what-is-physical-ai`)
- Consistent with Docusaurus best practices
- Easier to find files when searching in editor
- Avoids spaces and special characters that complicate file operations

**Alternatives Considered**:
- **Numbered prefixes**: `01-what-is-physical-ai.mdx` - provides ordering, but redundant with `sidebar_position`
- **PascalCase**: `WhatIsPhysicalAI.mdx` - harder to read in file listings
- **snake_case**: `what_is_physical_ai.mdx` - less common in JavaScript ecosystem

---

### Decision 4: Code Syntax Highlighting

**Decision**: Use Docusaurus built-in Prism with custom language support for robotics formats

**Rationale**:
- Prism supports Python, JavaScript, TypeScript, XML, YAML out of the box
- Can extend Prism with custom grammars for URDF/SDF (both XML-based)
- ROS 2 launch files (XML/Python) already supported
- Good performance with large code blocks
- Themeable (supports dark mode per NFR-009)

**Languages Required**:
- Python (ROS 2 nodes, scripts)
- XML (URDF models, SDF, ROS 2 XML launch files)
- YAML (ROS 2 YAML config, parameters)
- Bash (shell scripts for setup)
- C++ (advanced ROS 2 examples - optional)

**Configuration**:
```javascript
// docusaurus.config.js
prism: {
  theme: lightCodeTheme,
  darkTheme: darkCodeTheme,
  additionalLanguages: ['python', 'bash', 'yaml', 'xml', 'cpp'],
}
```

**References**:
- [Docusaurus Code Blocks](https://docusaurus.io/docs/markdown-features/code-blocks)
- [Prism Supported Languages](https://prismjs.com/#supported-languages)

---

### Decision 5: Asset Organization Strategy

**Decision**: Organize static assets by type (`/static/img/`, `/static/code/`, `/static/data/`) with chapter-prefixed filenames

**Rationale**:
- Type-based organization simplifies asset management (all images in one place)
- Chapter prefix (e.g., `chapter-03-nodes-topics-diagram.png`) provides traceability
- Aligns with constitution media/assets standards
- Easier to implement file size validation (<500KB for images, <100KB for code per constraint C-008)

**Alternatives Considered**:
- **Chapter-based organization**: `/static/chapter-01/`, `/static/chapter-02/` - harder to find all images or all code examples
- **No prefixes**: Simpler filenames, but risk of name collisions across 36 chapters

**Naming Pattern**:
- Images: `chapter-##-descriptive-name.png|jpg|svg`
- Code: `chapter-##-example-name.py|xml|yaml`
- Data: `chapter-##-model-name.urdf|sdf`

---

### Decision 6: GitHub Pages Deployment Strategy

**Decision**: Use GitHub Actions workflow with automated Docusaurus build and deployment

**Rationale**:
- GitHub Pages is free for public repositories
- GitHub Actions provides CI/CD integration
- Docusaurus has official deployment documentation
- Supports custom domains if needed later
- Automatic rebuilds on push to main branch

**Workflow Triggers**:
- Push to `main` branch (after feature branch merges)
- Manual workflow dispatch for testing

**Build Steps**:
1. Checkout repository
2. Setup Node.js 18.x
3. Install dependencies (`npm ci`)
4. Build Docusaurus (`npm run build`)
5. Deploy to `gh-pages` branch

**References**:
- [Docusaurus Deployment Guide](https://docusaurus.io/docs/deployment#deploying-to-github-pages)
- [GitHub Actions for Pages](https://github.com/peaceiris/actions-gh-pages)

---

### Decision 7: Chapter Template Structure

**Decision**: Standardize all chapters with consistent MDX front matter and section structure

**Front Matter Template**:
```markdown
---
id: what-is-physical-ai
title: What Is Physical AI?
sidebar_label: What Is Physical AI?
sidebar_position: 1
description: Introduction to Physical AI concepts and foundations
keywords: [physical AI, embodied intelligence, robotics]
---
```

**Section Structure**:
1. **Introduction** (H2): Context, learning objectives, prerequisites
2. **Theory** (H2): Conceptual explanation with diagrams
3. **Practical Implementation** (H2): Step-by-step guide
4. **Code Examples** (H2): Fully functional code blocks with explanations
5. **Exercises** (H2): Hands-on tasks with success criteria
6. **Summary** (H2): Key takeaways
7. **Further Reading** (H2): Links to official docs and resources

**Rationale**:
- Aligns with constitution Documentation Standards (intro, theory, code, diagrams, exercises)
- Consistent structure across all 36 chapters (per Principle III: Hierarchical Organization)
- Supports incremental learning (beginners can skip advanced sections)
- SEO-friendly (description, keywords in front matter)

---

### Decision 8: Responsive Design Approach

**Decision**: Use Docusaurus default responsive theme with custom CSS overrides for sidebar width

**Rationale**:
- Docusaurus theme is mobile-first and WCAG 2.1 AA compliant (per NFR-003)
- Default breakpoints: mobile (<996px), tablet (996px-1200px), desktop (>1200px)
- Custom CSS can adjust sidebar width for optimal navigation with 7 categories

**Custom Adjustments**:
- Desktop: Wider sidebar (300px) for category/chapter nesting
- Tablet: Collapsible hamburger menu
- Mobile: Full-screen sidebar overlay

**References**:
- [Docusaurus Styling Guide](https://docusaurus.io/docs/styling-layout)
- [WCAG 2.1 Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)

---

## Implementation Risks & Mitigations

### Risk 1: Sidebar Performance with 36 Chapters

**Risk**: Large sidebar may cause UI lag on lower-end devices

**Mitigation**:
- Use collapsible categories (default collapsed for all except active category)
- Implement lazy loading for chapter content
- Monitor bundle size and optimize if needed

---

### Risk 2: Asset File Size Bloat

**Risk**: Images and code files may exceed GitHub repository size limits

**Mitigation**:
- Enforce file size constraints: images <500KB, code <100KB (per C-008)
- Use compressed image formats (WebP, optimized PNG)
- Provide download links for large data files (URDF meshes) instead of storing in repo

---

### Risk 3: Code Example Obsolescence

**Risk**: ROS 2, Isaac Sim, and other tools may release breaking changes

**Mitigation**:
- Pin exact versions in code examples (e.g., "ROS 2 Humble Hawksbill 22.04")
- Include "Last Updated" dates in chapter front matter
- Plan quarterly review cycle for technical accuracy

---

## Research Sources

- [Docusaurus Official Documentation](https://docusaurus.io/docs)
- [MDX Documentation](https://mdxjs.com/)
- [ROS 2 Documentation](https://docs.ros.org/en/humble/)
- [NVIDIA Isaac Sim Documentation](https://docs.omniverse.nvidia.com/isaacsim/latest/)
- [GitHub Pages Documentation](https://docs.github.com/en/pages)
- [WCAG 2.1 Accessibility Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)

---

## Next Steps

With all technical decisions documented, proceed to:
1. **Phase 1**: Generate `data-model.md` (entities for sidebar/chapter/asset structure)
2. **Phase 1**: Create `quickstart.md` (manual testing scenarios for MVP)
3. **Phase 2**: Run `/sp.tasks` to generate implementation tasks
